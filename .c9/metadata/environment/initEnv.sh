{"filter":false,"title":"initEnv.sh","tooltip":"/initEnv.sh","undoManager":{"mark":16,"position":16,"stack":[[{"start":{"row":0,"column":0},"end":{"row":11,"column":0},"action":"insert","lines":["export ACCOUNT_ID=$(aws sts get-caller-identity --output text --query Account)","export AWS_REGION=$(curl -s 169.254.169.254/latest/dynamic/instance-identity/document | jq -r '.region')","","test -n \"$AWS_REGION\" && echo AWS_REGION is \"$AWS_REGION\" || echo AWS_REGION is not set","","echo \"export ACCOUNT_ID=${ACCOUNT_ID}\" | tee -a ~/.bash_profile","echo \"export AWS_REGION=${AWS_REGION}\" | tee -a ~/.bash_profile","aws configure set default.region ${AWS_REGION}","aws configure get default.region","","aws sts get-caller-identity --query Arn | grep eksworkshop-admin -q && echo \"IAM role valid\" || echo \"IAM role NOT valid\"",""],"id":1}],[{"start":{"row":11,"column":0},"end":{"row":20,"column":0},"action":"insert","lines":["","import key into ec2","aws ec2 import-key-pair --key-name \"eksworkshop\" --public-key-material file://~/.ssh/id_rsa.pub","","Create CMK for EKS cluster","aws kms create-alias --alias-name alias/eksworkshop --target-key-id $(aws kms create-key --query KeyMetadata.Arn --output text)","","insert key into bash_profile","echo \"export MASTER_ARN=${MASTER_ARN}\" | tee -a ~/.bash_profile",""],"id":2}],[{"start":{"row":12,"column":0},"end":{"row":12,"column":1},"action":"insert","lines":["#"],"id":3}],[{"start":{"row":15,"column":0},"end":{"row":15,"column":1},"action":"insert","lines":["#"],"id":4}],[{"start":{"row":18,"column":0},"end":{"row":18,"column":1},"action":"insert","lines":["#"],"id":5}],[{"start":{"row":20,"column":0},"end":{"row":21,"column":0},"action":"insert","lines":["",""],"id":6}],[{"start":{"row":21,"column":0},"end":{"row":23,"column":37},"action":"insert","lines":["curl --silent --location \"https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz\" | tar xz -C /tmp","","sudo mv -v /tmp/eksctl /usr/local/bin"],"id":7}],[{"start":{"row":23,"column":37},"end":{"row":24,"column":0},"action":"insert","lines":["",""],"id":8},{"start":{"row":24,"column":0},"end":{"row":25,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":25,"column":0},"end":{"row":30,"column":18},"action":"insert","lines":["eksctl completion bash >> ~/.bash_completion",". /etc/profile.d/bash_completion.sh",". ~/.bash_completion"," AWS Load Balancer controller version","echo 'export LBC_VERSION=\"v2.0.0\"' >>  ~/.bash_profile",".  ~/.bash_profile"],"id":9}],[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"remove","lines":[" "],"id":10}],[{"start":{"row":28,"column":0},"end":{"row":28,"column":1},"action":"insert","lines":["#"],"id":11}],[{"start":{"row":28,"column":0},"end":{"row":29,"column":0},"action":"insert","lines":["",""],"id":12}],[{"start":{"row":0,"column":0},"end":{"row":1,"column":0},"action":"insert","lines":["",""],"id":13},{"start":{"row":1,"column":0},"end":{"row":2,"column":0},"action":"insert","lines":["",""]}],[{"start":{"row":0,"column":0},"end":{"row":0,"column":1},"action":"insert","lines":["y"],"id":14},{"start":{"row":0,"column":1},"end":{"row":0,"column":2},"action":"insert","lines":["u"]},{"start":{"row":0,"column":2},"end":{"row":0,"column":3},"action":"insert","lines":["m"]}],[{"start":{"row":0,"column":3},"end":{"row":0,"column":4},"action":"insert","lines":[" "],"id":15},{"start":{"row":0,"column":4},"end":{"row":0,"column":5},"action":"insert","lines":["i"]},{"start":{"row":0,"column":5},"end":{"row":0,"column":6},"action":"insert","lines":["n"]},{"start":{"row":0,"column":6},"end":{"row":0,"column":7},"action":"insert","lines":["s"]},{"start":{"row":0,"column":7},"end":{"row":0,"column":8},"action":"insert","lines":["t"]},{"start":{"row":0,"column":8},"end":{"row":0,"column":9},"action":"insert","lines":["a"]},{"start":{"row":0,"column":9},"end":{"row":0,"column":10},"action":"insert","lines":["l"]},{"start":{"row":0,"column":10},"end":{"row":0,"column":11},"action":"insert","lines":["l"]}],[{"start":{"row":0,"column":11},"end":{"row":0,"column":12},"action":"insert","lines":[" "],"id":16}],[{"start":{"row":0,"column":12},"end":{"row":0,"column":35},"action":"insert","lines":["kubectl jq envsubst aws"],"id":17}]]},"ace":{"folds":[],"scrolltop":307.5,"scrollleft":0,"selection":{"start":{"row":0,"column":35},"end":{"row":0,"column":35},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":18,"state":"start","mode":"ace/mode/sh"}},"timestamp":1607590985051,"hash":"bb4b7da8c353d24f686c54afae42afb736c025a3"}